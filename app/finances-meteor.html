<head>
  <title>finances-meteor</title>
</head>

<body>
</body>

<template name='home'>
  <div id='home' class='center page'>
    <p>
      Need to settle debts among friends (or co-workers, roommates, random strangers, anyone really) without unnecessary transactions (read pain and hassle)? Simply indicate:
    </p>
    <ol>
      <li>&#x2714; names of people/parties involved</li>
      <li>&#x2714; names of items purchased and their amount</li>
      <li>&#x2714; who paid for and/or used what</li>
    </ol>
    <p>
      And receive the shortest possible list of steps to get everyone what they're owed.
    </p>

    </ol>
    <div class='call-to-action'>
      <a data-start-button type=button class='center' href='/accounts'>Get Started!</a>
    </div>
  </div>
</template>

<template name='global-menu'>
  <div id='global-menu' class='clearfix'>
      <a data-next-button type=button class='pull-right {{#if nextButtonDisabled}}disabled{{/if}}'>next &rarr;</a>
      <a data-up-button type=button class='pull-right {{#if upButtonDisabled}}disabled{{/if}}'>up &uarr;</a>
      <a data-reset-button type=button class='pull-right'>reset</a>
      <span class='muted'>Step {{stepNumber}}/3</span>
    </div>
  </div> 
</template>

<template name="account-form">
  {{> global-menu}}
  <form id='account-form'>
    <h1>List accounts (peeps)</h1>
    <ul>
      <li>
        <input type='text' placeholder='Name' value="{{name}}" data-account-name-input tabindex=0>
      </li>
    {{#each accounts}}
    <li>
      <a data-link data-account='{{name}}'>{{name}}</a><a type='button' data-remove-button data-account='{{name}}'>&#x2718;</a>
    </li>
    {{/each}}
    </ul>
  </form>
</template>

<template name="item-form">
  {{> global-menu}}
  <form id='item-form'>
    <p class='flash'>{{message}}</p>
    <h1>List shared items</h1>
    <ul>
      <li>
      <input type='text' placeholder='Name' value="{{name}}" data-input=name tabindex=2><input type='number' placeholder='$$$' value="{{amount}}" data-input=amount min=0 tabindex=3><a type='button' data-add-button data-item='{{name}}'>&#x2714;</a>
      </li>
    {{#each items}}
    <li>
    <a data-link data-item='{{name}}' href='#'>{{name}}<span class='pull-right'>${{amount}}</span></a></a><a type='button' data-remove-button data-item='{{name}}' href='#'>âœ˜</a>
    </li>
    {{/each}}
    </ul>
  </form>
</template>

<template name='item-detail-form'>
  {{> global-menu}}
  <form id='item-detail-form'>
    <div class='flash'>Click actions that apply</div>
    {{#if account}}
    <h1>Who did what with the {{item.name}}?</h1>
    <div data-account='{{account.name}}' draggable=true>{{account.name}}</div>
    {{/if}}
    {{#unless account}}
    <h1>Looks like we're done here! (click up)</h1>
    {{/unless}}
    <!-- <div data-both-drop-zone> -->
    <!--   Used and paid for {{item.name}}: -->
    <!--   <ul> -->
    <!--     {{#each boths}} -->
    <!--     <li>{{name}}</li> -->
    <!--     {{/each}} -->
    <!--   </ul> -->
    <!-- </div> -->
    <div data-use-drop-zone>
      Used {{item.name}}:
      <ul>
        {{#each users}}
        <li>{{name}}</li>
        {{/each}}
      </ul>
    </div>
    <div data-pay-drop-zone>
      Paid for {{item.name}}:
      <ul>
        {{#each payers}}
        <li>{{name}}</li>
        {{/each}}
      </ul>
    </div>
    <div data-nothing-drop-zone>
      None of the above
    </div>
  </form>
</template>

<template name='results'>
  {{> global-menu }}
  <div id='results'>
    <h1>What happened:</h1>
    <ol>
      {{#each externalPayments}}
      <li>{{fromAccount.name}} paid ${{amount}} for {{item.name}}</li>
      {{/each}}
      {{#each usages}}
      <li>{{fromAccount.name}} used {{item.name}}</li>
      {{/each}}
    </ol>
    <h1>What needs to happen:</h1>
    <ol>
      {{#each unsettledPayments}}
      <li>{{fromAccount.name}} should pay ${{amount}} to {{toAccount.name}}</li>
      {{/each}}
      {{#unless unsettledPayments}}
      <li>Nothing! You're already even!</li>
      {{/unless}}
    </ol>
    <h1>...And, that's it!</h1>
  </div>
</template>
